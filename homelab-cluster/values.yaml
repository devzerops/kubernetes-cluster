global:
  podSecurity:
    enforce: baseline
    audit: baseline
    warn: baseline
  podSecurityExemptions:
    namespaces:
      - kube-system
      - cert-manager
      - cilium
      - elastic-stack
      - elastic-system
      - argocd
      - monitoring
      - rook-ceph
      - vault

cert-manager:
  namespace: cert-manager

cilium:
  version: 1.16.3
  namespace: kube-system

  cni:
    exclusive: false

  socketLB:
    hostNamespaceOnly: true

  mtls:
    mode: DISABLE

  ipam:
    mode: kubernetes

  kubeProxyReplacement: true

  securityContext:
    capabilities:
      ciliumAgent:
        - CHOWN
        - KILL
        - NET_ADMIN
        - NET_RAW
        - IPC_LOCK
        - SYS_ADMIN
        - SYS_RESOURCE
        - DAC_OVERRIDE
        - FOWNER
        - SETGID
        - SETUID
      cleanCiliumState:
        - NET_ADMIN
        - SYS_ADMIN
        - SYS_RESOURCE

  cgroup:
    autoMount:
      enabled: false
    hostRoot: /sys/fs/cgroup

  k8sServiceHost: localhost
  k8sServicePort: 7445

  k8sClientRateLimit:
    qps: 5
    burst: 10

  l2announcements:
    enabled: true
    leaseDuration: 15s
    leaseRenewDeadline: 5s
    leaseRetryPeriod: 2s
    algorithm: maglev

  externalIPs:
    enabled: true

  hubble:
    ui:
      enabled: true
    relay:
      enabled: true

argo-cd:
  namespace: argocd
  podSecurity:
  enforce: privileged
  configs:
    params:
      server.insecure: true
  redis-ha:
    enabled: true

  controller:
    replicas: 1

  server:
    replicas: 2

  repoServer:
    replicas: 2

  applicationSet:
    replicas: 2
  

grafana:
  namespace: monitoring
  podSecurity:
  enforce: privileged

prometheus:
  namespace: monitoring
  podSecurity:
  enforce: privileged

  cephClusterSpec:
    mon:
      count: 3
    mgr:
      count: 1
    dashboard:
      enabled: true
    storage:
      useAllNodes: true
      useAllDevices: true
    
  cephBlockPools:
    - name: replicapool
      spec:
        failureDomain: host
        replicated:
          size: 3
      storageClass:
        enabled: true
        name: rook-ceph-block
        isDefault: true
        reclaimPolicy: Delete
        allowVolumeExpansion: true
        
  cephFileSystems:
    - name: myfs
      spec:
        metadataPool:
          replicated:
            size: 3
        dataPools:
          - name: replicated
            replicated:
              size: 3
        metadataServer:
          activeCount: 1
          activeStandby: true
      storageClass:
        enabled: true
        name: rook-cephfs
        
  cephObjectStores:
    - name: my-store
      spec:
        metadataPool:
          failureDomain: host
          replicated:
            size: 3
        dataPool:
          failureDomain: host
          erasureCoded:
            dataChunks: 2
            codingChunks: 1
        gateway:
          port: 80
          instances: 1
      storageClass:
        enabled: true
        name: rook-ceph-bucket

vault:
  namespace: vault